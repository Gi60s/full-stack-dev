
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Full Stack Web Development | Vuex</title>
  

  <link rel="icon" href="/full-stack-dev/favicon.png">

  <link rel="stylesheet" href="/full-stack-dev/template-files/styles/main.css" media="all">
  
  
  <link rel="stylesheet" href="/full-stack-dev/css/main.css" media="all">
  
  
  
</head>

<body>
  <header class="site-header">
    <div class="wrapper">
      <a class="site-title" href="/full-stack-dev">
        Full Stack Web Development
      </a>

      
      <nav class="site-nav">
        <a href="#" class="menu-icon" aria-label="Menu">
          <svg viewBox="0 0 18 15">
            <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
            <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
            <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
          </svg>
        </a>
      </nav>
      
    </div>
  </header>

<div class="page-content">
  <div class="wrapper">

    
    <div class="nav-screen"></div>
    <nav class="nav-list"><ul><li><a href="/full-stack-dev">Home</a></li><li><a href="/full-stack-dev/history">History of the Web</a></li><li><a href="/full-stack-dev/domain-driven-design">Domain Driven Design</a></li><li><a href="/full-stack-dev/git">Git</a></li><li><a href="/full-stack-dev/rest">REST</a></li><li><a href="/full-stack-dev/javascript">JavaScript Fundamentals</a></li><li><a href="/full-stack-dev/node-and-npm">NodeJS and NPM</a></li><li><a href="/full-stack-dev/express">Express</a></li><li><a href="/full-stack-dev/testing-intro">Testing Introduction</a></li><li><a href="/full-stack-dev/testing-nodejs">Testing NodeJS</a></li><li><a href="/full-stack-dev/async-javascript">Asynchronous JavaScript</a></li><li><a href="/full-stack-dev/events">Events</a></li><li><a href="/full-stack-dev/docker-part-1">Docker (Part 1)</a></li><li><a href="/full-stack-dev/docker-part-2">Docker (Part 2)</a></li><li><a href="/full-stack-dev/sql">SQL Databases</a></li><li><a href="/full-stack-dev/nosql">NoSQL Databases</a></li><li><a href="/full-stack-dev/session-management">Session Management</a></li><li><a href="/full-stack-dev/html-css">HTML and CSS</a></li><li><a href="/full-stack-dev/browser-events">Browser Events</a></li><li><a href="/full-stack-dev/vue">Vue Introduction</a></li><li><a href="/full-stack-dev/vue-cli">Vue CLI</a></li><li><a href="/full-stack-dev/vue-components">Vue Components</a></li><li><a href="/full-stack-dev/vue-router">Vue Router</a></li><li><a href="/full-stack-dev/nuxt">Nuxt</a></li><li><a href="/full-stack-dev/vuex" class="current-page">Vuex</a></li><li><a href="/full-stack-dev/css-pre-processors">CSS Pre-Processors</a></li><li><a href="/full-stack-dev/signup">Sign-up Queue</a></li></ul></li></nav>
    

    <div class="page-content-main">
      <article class="post">
        <header class="post-header">
          
          <h1 class="post-title">Vuex</h1>
        </header>

        
        <div>
          <p><strong>Page Content</strong></p>
          <div class="section-nav"><ul class="toc"><li><a href="#introduction">Introduction</a></li><li><a href="#how-to-implement-vuex">How to Implement Vuex</a></li><li><a href="#vuex-examples">Vuex Examples</a></li><li><a href="#exercise">Exercise</a></li></ul></div>
        </div>
        

        <div class="post-content"><h1 id="introduction">Introduction</h1>
<blockquote>
<p>What is Vuex?</p>
<p>Vuex is a state management pattern + library for Vue.js applications. It serves as a centralized store for all the components in an application, with rules ensuring that the state can only be mutated in a predictable fashion. It also integrates with Vue&#39;s official devtools extension to provide advanced features such as zero-config time-travel debugging and state snapshot export / import.</p>
<p><a href="https://vuex.vuejs.org/en/intro.html">https://vuex.vuejs.org/en/intro.html</a></p>
</blockquote>
<h2 id="visual-explanation">Visual Explanation</h2>
<p>Check out the introductory video at <a href="https://vuex.vuejs.org/">https://vuex.vuejs.org/</a></p>
<ul>
<li><p>We have seen how you can pass data to components through their properties.</p>
</li>
<li><p>Components can emit events to the parent so that the parent knows of update changes.</p>
</li>
<li><p>In an app with deeply nested components it can be difficult to ensure that all of the relevant components get all of the data.</p>
</li>
<li><p>Vuex gives us a predictable, stable, trackable, global state.</p>
</li>
</ul>
<h2 id="about-state-management-engines">About State Management Engines</h2>
<p>With Vuex state management:</p>
<ul>
<li><p>You can have 3 way data binding between the UI, the front-end data store, and the back end web service.</p>
</li>
<li><p>You greatly simplify data management on the front-end data store.</p>
</li>
<li><p>You have better debugging (including time travel debugging)</p>
</li>
<li><p>Code is cleaner and decoupled.</p>
</li>
</ul>
<h1 id="how-to-implement-vuex">How to Implement Vuex</h1>
<p><a href="https://vuex.vuejs.org/guide/">https://vuex.vuejs.org/guide/</a></p>
<ol>
<li><p>You need a JavaScript file that creates a new Vuex instance.</p>
<pre><code class="language-js"> <span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
 <span class="hljs-keyword">import</span> Vuex <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

 <span class="hljs-comment">// add Vuex as plugin to Vue    </span>
 Vue.use(Vuex)

 <span class="hljs-comment">// create the Vuex store</span>
 <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.Store({

   <span class="hljs-comment">// this is the global application state object that can be read</span>
   <span class="hljs-comment">// anywhere but should only be updated through mutations</span>
   <span class="hljs-attr">state</span>: {

   },

   <span class="hljs-comment">// this allows you to create computed values based on state values</span>
   <span class="hljs-attr">getters</span>: {

   },

   <span class="hljs-comment">// this allows you to define synchronous state change event handlers</span>
   <span class="hljs-comment">// that will actually mutate the internal state</span>
   <span class="hljs-attr">mutations</span>: {

   },

   <span class="hljs-comment">// this allows you to define action event handlers that perform one</span>
   <span class="hljs-comment">// or more mutations (synchronously or asynchronously) but that</span>
   <span class="hljs-comment">// don't directory mutate internal state</span>
   <span class="hljs-attr">actions</span>: {

   }
 })</code></pre>
</li>
<li><p>You need to import to store into the main application component and it will make sure that all of its children have access to the store through <code>this.$store</code>.</p>
<pre><code class="language-js"> <span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
 <span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
 <span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>
 <span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>

 <span class="hljs-keyword">new</span> Vue({
   router,
   store,
   <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> h(App)
 }).$mount(<span class="hljs-string">'#app'</span>)</code></pre>
</li>
</ol>
<h1 id="vuex-examples">Vuex Examples</h1>
<h2 id="a-vuex-store">A Vuex Store</h2>
<ul>
<li><p>By having a <code>loading</code> state and a <code>loadingMessage</code> state we can show the loading spinner and update the loading message while keeping the spinner up.</p>
</li>
<li><p>The <code>markDone</code> mutation takes an object as a parameter. We&#39;re using destructuring to extract the properties from the object.</p>
</li>
<li><p>The first parameter of an action is the store itself, so in the <code>save</code> action we destructure that first parameter as an example of some of what it contains.</p>
</li>
<li><p>We don&#39;t actually have a <code>saveToDatabase</code> function yet. This is just pseudo code for now.</p>
</li>
</ul>
<pre><code class="language-js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> Vuex <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>

Vue.use(Vuex)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> Vuex.Store({

  <span class="hljs-attr">state</span>: {
    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">loadingMessage</span>: <span class="hljs-string">''</span>,
    <span class="hljs-attr">todoItems</span>: [
      { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Todo 1'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
      { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'Todo 2'</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> },
    ]
  },

  <span class="hljs-attr">getters</span>: {
    doneTodoItems (state) {
      <span class="hljs-keyword">return</span> state.todoItems.filter(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.done)
    }
  },

  <span class="hljs-attr">mutations</span>: {
    markDone (state, { id, done }) {
      <span class="hljs-keyword">const</span> index = state.todoItems.findIndex(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.id === id)
      <span class="hljs-keyword">if</span> (index !== <span class="hljs-number">-1</span>) state.todoItems[index].done = done
    },
    setLoading (state, loading) {
      state.loading = loading
    },
    setLoadingMessage (state, message) {
      state.loadingMessage = message
    }
  },

  <span class="hljs-attr">actions</span>: {
    save ({ commit, dispatch, getters, state }, message) {
      commit(<span class="hljs-string">'setLoading'</span>, <span class="hljs-literal">true</span>)
      commit(<span class="hljs-string">'setLoadingMessage'</span>, message)
      makeRestCallToSaveToDatabase(state.todoItems)   <span class="hljs-comment">// pseudo code</span>
      commit(<span class="hljs-string">'setLoading'</span>, <span class="hljs-literal">false</span>)
    }
  }
})</code></pre>
<h2 id="a-view-that-uses-the-vuex-store">A View that Uses the Vuex Store</h2>
<ul>
<li><p>We are using a <code>todo-item</code> component that we&#39;ll see in the next example</p>
</li>
<li><p>We pass an identifier to the <code>todo-item</code> so that it can manage it&#39;s own internal data and relationship to the Vuex store.</p>
</li>
<li><p>In this example we don&#39;t have a <code>data</code> property (not that you couldn&#39;t have it) because we&#39;re able to use getters and methods to do everything we need with the Vuex store.</p>
</li>
</ul>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">todo-item</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"task in todoList"</span> <span class="hljs-attr">:task-id</span>=<span class="hljs-string">"task.id"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">todo-item</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"save()"</span>&gt;</span>Save<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> TodoItem <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/TodoItem'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'todo-list'</span>,
  <span class="hljs-attr">components</span>: {
    TodoItem
  },
  <span class="hljs-attr">computed</span>: {
    todoList () {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$store.state.todoItems
    }
  },
  <span class="hljs-attr">methods</span>: {
    save () {
      <span class="hljs-keyword">this</span>.$store.dispatch(<span class="hljs-string">'save'</span>, <span class="hljs-string">'Saving now...'</span>)
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<h2 id="a-vue-component-that-uses-the-vuex-store">A Vue Component that Uses the Vuex Store</h2>
<ul>
<li><p>We have three getters:</p>
<ul>
<li><p><code>task</code> gets the task from the Vuex store that relates to this item. Computed properties only recompute when the underlying data changes, so although this getter is costly to run the first time, subsequent gets are immediate.</p>
</li>
<li><p><code>done</code> get the current done state for the task</p>
</li>
<li><p><code>text</code> gets the current todo item&#39;s text value</p>
</li>
</ul>
</li>
<li><p>We have one setter, <code>done</code>. This is tied to the <code>v-model</code> on the checkbox and will commit the the Vuex store when its state changes.</p>
</li>
</ul>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"taskId"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"done"</span>&gt;</span>
      {{ text }}
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'todo-item'</span>,
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'taskId'</span>],
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-attr">done</span>: {
      <span class="hljs-keyword">set</span> (isDone) {
        <span class="hljs-keyword">this</span>.$store.commit(<span class="hljs-string">'markDone'</span>, {
          <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.taskId,
          <span class="hljs-attr">done</span>: isDone
        })
      },
      <span class="hljs-keyword">get</span> () {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.task.done
      }
    },
    task () {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$store.state.todoItems.find(<span class="hljs-function"><span class="hljs-params">task</span> =&gt;</span> task.id === <span class="hljs-keyword">this</span>.taskId)
    },
    text () {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.task.text
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
<h1 id="exercise">Exercise</h1>
<ol>
<li><p>Get the latest version of the <code>ContactsKeeper</code> app from <a href="https://github.com/Gi60s/it410-2019-in-class-app">https://github.com/Gi60s/it410-2019-in-class-app</a></p>
</li>
<li><p>We need some user state that tells us who the authenticated user is:</p>
<ul>
<li><p>Create user state object that will be null when there is no user or will be a plain object with <code>username</code>, <code>name</code>, <code>email</code>, and <code>phone</code> properties when there is a user.</p>
</li>
<li><p>Create a mutation to set (or unset) the current user.</p>
</li>
<li><p>Create an action to perform a login request that on success will call the mutation to set the current user. For now this won&#39;t actually hit an API.</p>
</li>
</ul>
</li>
<li><p>Update which links are visible based on authenticated state.</p>
</li>
<li><p>Enable updates of profile information.</p>
</li>
</ol>
</div>
      </article>

      <footer class="site-footer">

        
        <p>
          Caught a mistake or want to contribute to the documentation?
          <a href="https://github.com/Gi60s/full-stack-dev/tree/master/docs-src/vuex.md" target="_blank" rel="noopener">Edit this page on Github</a>
        </p>
        

        

        
        <div class="footer-links">
          
        </div>
        

      </footer>
    </div>

  </div>
</div>

<script src="/full-stack-dev/template-files/js/main.js"></script>


<script src="/full-stack-dev/js/main.js"></script>



</body>

</html>
